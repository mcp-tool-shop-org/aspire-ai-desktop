<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="ScalarScope.Views.HelpPage"
             Title="Help"
             BackgroundColor="{AppThemeBinding Light=#F5F5F5, Dark=#0f0f1a}">

    <ScrollView>
        <VerticalStackLayout Padding="24" Spacing="24">

            <!-- Header -->
            <Label Text="How to Read ScalarScope"
                   FontSize="28"
                   FontAttributes="Bold"
                   TextColor="{AppThemeBinding Light=#333333, Dark=#FFFFFF}" />

            <!-- What You Just Saw (shows after demo completion) -->
            <Border x:Name="demoRecapFrame"
                   BackgroundColor="{AppThemeBinding Light=#E8F5E9, Dark=#1a2e1a}"
                   Stroke="#4ecdc4"
                   StrokeShape="RoundRectangle 12"
                   Padding="20"
                   IsVisible="False">
                <VerticalStackLayout Spacing="12">
                    <HorizontalStackLayout Spacing="10">
                        <Label Text="âœ“"
                               FontSize="20"
                               TextColor="#4ecdc4"
                               VerticalOptions="Center"/>
                        <Label Text="What You Just Saw"
                               FontSize="18"
                               FontAttributes="Bold"
                               TextColor="#4ecdc4"
                               VerticalOptions="Center"/>
                    </HorizontalStackLayout>

                    <Label Text="The demo compared two training runs with identical settings except for evaluator geometry:"
                           TextColor="{AppThemeBinding Light=#333333, Dark=#CCCCCC}"/>

                    <Grid ColumnDefinitions="*,*" ColumnSpacing="15" Margin="0,5">
                        <VerticalStackLayout Grid.Column="0" Spacing="5">
                            <Label Text="Path A: Orthogonal"
                                   FontAttributes="Bold"
                                   TextColor="#ff6b6b"/>
                            <Label Text="Professors with independent criteria (r â‰ˆ 0). Eigenvalues stayed distributed. No unified axis emerged."
                                   TextColor="{AppThemeBinding Light=#666666, Dark=#AAAAAA}"
                                   FontSize="12"
                                   LineBreakMode="WordWrap"/>
                        </VerticalStackLayout>

                        <VerticalStackLayout Grid.Column="1" Spacing="5">
                            <Label Text="Path B: Correlated"
                                   FontAttributes="Bold"
                                   TextColor="#4ecdc4"/>
                            <Label Text="Professors sharing latent quality (r â‰ˆ 0.87). Î»â‚ dominated the spectrum. Model converged to shared axis."
                                   TextColor="{AppThemeBinding Light=#666666, Dark=#AAAAAA}"
                                   FontSize="12"
                                   LineBreakMode="WordWrap"/>
                        </VerticalStackLayout>
                    </Grid>

                    <Label Text="Key insight: Evaluative internalization is possible if and only if evaluators share a latent evaluative manifold."
                           TextColor="{AppThemeBinding Light=#333333, Dark=#FFFFFF}"
                           FontAttributes="Italic"
                           Margin="0,5,0,0"/>

                    <Button Text="Watch Demo Again"
                            x:Name="replayDemoButton"
                            Clicked="OnReplayDemoClicked"
                            BackgroundColor="#4ecdc4"
                            TextColor="#0f0f1a"
                            FontSize="12"
                            Padding="12,6"
                            HeightRequest="32"
                            CornerRadius="6"
                            HorizontalOptions="Start"
                            Margin="0,5,0,0"/>
                </VerticalStackLayout>
            </Border>

            <!-- Interpretation Guide (NEW - Primary Section) -->
            <Border BackgroundColor="{AppThemeBinding Light=#FFFFFF, Dark=#1a1a2e}"
                   Stroke="#00d9ff"
                   StrokeShape="RoundRectangle 12"
                   Padding="20">
                <VerticalStackLayout Spacing="16">
                    <Label Text="Understanding the Visualizations"
                           FontSize="18"
                           FontAttributes="Bold"
                           TextColor="#00d9ff" />

                    <!-- Trajectory Shapes -->
                    <Border BackgroundColor="{AppThemeBinding Light=#F8F8F8, Dark=#0f0f1a}"
                           Stroke="Transparent"
                           StrokeShape="RoundRectangle 8"
                           Padding="16">
                        <VerticalStackLayout Spacing="8">
                            <Label Text="Trajectory Shapes"
                                   FontAttributes="Bold"
                                   TextColor="{AppThemeBinding Light=#333333, Dark=#4ecdc4}" />
                            <Label Text="â€¢ Smooth convergence â†’ Learning is stable, evaluators agree"
                                   TextColor="{AppThemeBinding Light=#666666, Dark=#AAAAAA}" />
                            <Label Text="â€¢ Spiraling path â†’ Oscillation between competing objectives"
                                   TextColor="{AppThemeBinding Light=#666666, Dark=#AAAAAA}" />
                            <Label Text="â€¢ Sharp turns â†’ Phase transitions or revision events"
                                   TextColor="{AppThemeBinding Light=#666666, Dark=#AAAAAA}" />
                            <Label Text="â€¢ Stagnation â†’ Learning plateau, possible local minimum"
                                   TextColor="{AppThemeBinding Light=#666666, Dark=#AAAAAA}" />
                        </VerticalStackLayout>
                    </Border>

                    <!-- Eigenvalue Dominance -->
                    <Border BackgroundColor="{AppThemeBinding Light=#F8F8F8, Dark=#0f0f1a}"
                           Stroke="Transparent"
                           StrokeShape="RoundRectangle 8"
                           Padding="16">
                        <VerticalStackLayout Spacing="8">
                            <Label Text="Eigenvalue Dominance"
                                   FontAttributes="Bold"
                                   TextColor="{AppThemeBinding Light=#333333, Dark=#ff9f43}" />
                            <Label Text="â€¢ Single dominant Î»â‚ (>70%) â†’ Evaluators share latent structure"
                                   TextColor="{AppThemeBinding Light=#666666, Dark=#AAAAAA}" />
                            <Label Text="â€¢ Distributed eigenvalues â†’ Orthogonal evaluator criteria"
                                   TextColor="{AppThemeBinding Light=#666666, Dark=#AAAAAA}" />
                            <Label Text="â€¢ Collapsing spectrum â†’ Convergent learning (Path B)"
                                   TextColor="{AppThemeBinding Light=#666666, Dark=#AAAAAA}" />
                            <Label Text="â€¢ Stable spectrum â†’ Pluralistic learning (Path A)"
                                   TextColor="{AppThemeBinding Light=#666666, Dark=#AAAAAA}" />
                        </VerticalStackLayout>
                    </Border>

                    <!-- Scalar Rings -->
                    <Border BackgroundColor="{AppThemeBinding Light=#F8F8F8, Dark=#0f0f1a}"
                           Stroke="Transparent"
                           StrokeShape="RoundRectangle 8"
                           Padding="16">
                        <VerticalStackLayout Spacing="8">
                            <Label Text="Scalar Rings (Vortex View)"
                                   FontAttributes="Bold"
                                   TextColor="{AppThemeBinding Light=#333333, Dark=#c56cf0}" />
                            <Label Text="â€¢ Phase-locked rings â†’ All dimensions improving together"
                                   TextColor="{AppThemeBinding Light=#666666, Dark=#AAAAAA}" />
                            <Label Text="â€¢ Drifting phases â†’ Tradeoffs between quality dimensions"
                                   TextColor="{AppThemeBinding Light=#666666, Dark=#AAAAAA}" />
                            <Label Text="â€¢ Expanding radius â†’ Metric improvement over time"
                                   TextColor="{AppThemeBinding Light=#666666, Dark=#AAAAAA}" />
                        </VerticalStackLayout>
                    </Border>

                    <!-- Why Comparison Matters -->
                    <Border BackgroundColor="{AppThemeBinding Light=#F8F8F8, Dark=#0f0f1a}"
                           Stroke="Transparent"
                           StrokeShape="RoundRectangle 8"
                           Padding="16">
                        <VerticalStackLayout Spacing="8">
                            <Label Text="Why Comparison Matters"
                                   FontAttributes="Bold"
                                   TextColor="{AppThemeBinding Light=#333333, Dark=#ffd93d}" />
                            <Label Text="Path A (Orthogonal): Evaluators measure different qualities. Model learns to satisfy each independently. Maintains diversity but may not converge."
                                   TextColor="{AppThemeBinding Light=#666666, Dark=#AAAAAA}" />
                            <Label Text="Path B (Correlated): Evaluators share underlying structure. Model finds unified representation. Converges but may miss orthogonal qualities."
                                   TextColor="{AppThemeBinding Light=#666666, Dark=#AAAAAA}"
                                   Margin="0,8,0,0" />
                        </VerticalStackLayout>
                    </Border>
                </VerticalStackLayout>
            </Border>

            <!-- Quick Actions -->
            <Border BackgroundColor="{AppThemeBinding Light=#FFFFFF, Dark=#1a1a2e}"
                   Stroke="{AppThemeBinding Light=#DDDDDD, Dark=#2a2a4e}"
                   StrokeShape="RoundRectangle 12"
                   Padding="20">
                <VerticalStackLayout Spacing="16">
                    <Label Text="Quick Actions"
                           FontSize="18"
                           FontAttributes="Bold"
                           TextColor="{AppThemeBinding Light=#333333, Dark=#FFFFFF}" />

                    <FlexLayout Wrap="Wrap" JustifyContent="Start">
                        <Button Text="ðŸ” Run Diagnostics"
                                Clicked="OnRunDiagnosticsClicked"
                                BackgroundColor="#4ecdc4"
                                TextColor="White"
                                Margin="0,0,12,12"
                                Padding="16,10"
                                CornerRadius="8" />

                        <Button Text="ðŸ“¦ Create Support Bundle"
                                Clicked="OnCreateSupportBundleClicked"
                                BackgroundColor="{AppThemeBinding Light=#DDDDDD, Dark=#2a2a4e}"
                                TextColor="{AppThemeBinding Light=#333333, Dark=#FFFFFF}"
                                Margin="0,0,12,12"
                                Padding="16,10"
                                CornerRadius="8" />

                        <Button Text="ðŸ“‹ Copy System Info"
                                Clicked="OnCopySystemInfoClicked"
                                BackgroundColor="{AppThemeBinding Light=#DDDDDD, Dark=#2a2a4e}"
                                TextColor="{AppThemeBinding Light=#333333, Dark=#FFFFFF}"
                                Margin="0,0,12,12"
                                Padding="16,10"
                                CornerRadius="8" />
                    </FlexLayout>
                </VerticalStackLayout>
            </Border>

            <!-- Diagnostics Result (hidden by default) -->
            <Border x:Name="DiagnosticsFrame"
                   IsVisible="False"
                   BackgroundColor="{AppThemeBinding Light=#FFFFFF, Dark=#16213e}"
                   Stroke="{AppThemeBinding Light=#DDDDDD, Dark=#2a2a4e}"
                   StrokeShape="RoundRectangle 12"
                   Padding="20">
                <VerticalStackLayout Spacing="12">
                    <Label Text="Diagnostics Results"
                           FontSize="18"
                           FontAttributes="Bold"
                           TextColor="{AppThemeBinding Light=#333333, Dark=#FFFFFF}" />

                    <Label x:Name="DiagnosticsResultLabel"
                           FontFamily="Consolas"
                           FontSize="14"
                           TextColor="{AppThemeBinding Light=#333333, Dark=#AAAAAA}" />
                </VerticalStackLayout>
            </Border>

            <!-- Common Issues -->
            <Border BackgroundColor="{AppThemeBinding Light=#FFFFFF, Dark=#1a1a2e}"
                   Stroke="{AppThemeBinding Light=#DDDDDD, Dark=#2a2a4e}"
                   StrokeShape="RoundRectangle 12"
                   Padding="20">
                <VerticalStackLayout Spacing="16">
                    <Label Text="Common Issues"
                           FontSize="18"
                           FontAttributes="Bold"
                           TextColor="{AppThemeBinding Light=#333333, Dark=#FFFFFF}" />

                    <!-- Issue 1 -->
                    <Border BackgroundColor="{AppThemeBinding Light=#F8F8F8, Dark=#0f0f1a}"
                           Stroke="Transparent"
                           StrokeShape="RoundRectangle 8"
                           Padding="16">
                        <VerticalStackLayout Spacing="8">
                            <Label Text="âŒ File won't load"
                                   FontAttributes="Bold"
                                   TextColor="{AppThemeBinding Light=#333333, Dark=#FFFFFF}" />
                            <Label Text="â€¢ Ensure the file is valid JSON format"
                                   TextColor="{AppThemeBinding Light=#666666, Dark=#AAAAAA}" />
                            <Label Text="â€¢ Check the file isn't corrupted or truncated"
                                   TextColor="{AppThemeBinding Light=#666666, Dark=#AAAAAA}" />
                            <Label Text="â€¢ Verify the schema matches ScalarScope training run format"
                                   TextColor="{AppThemeBinding Light=#666666, Dark=#AAAAAA}" />
                        </VerticalStackLayout>
                    </Border>

                    <!-- Issue 2 -->
                    <Border BackgroundColor="{AppThemeBinding Light=#F8F8F8, Dark=#0f0f1a}"
                           Stroke="Transparent"
                           StrokeShape="RoundRectangle 8"
                           Padding="16">
                        <VerticalStackLayout Spacing="8">
                            <Label Text="ðŸŒ Slow or choppy playback"
                                   FontAttributes="Bold"
                                   TextColor="{AppThemeBinding Light=#333333, Dark=#FFFFFF}" />
                            <Label Text="â€¢ Close other GPU-intensive applications"
                                   TextColor="{AppThemeBinding Light=#666666, Dark=#AAAAAA}" />
                            <Label Text="â€¢ Try reducing the export resolution"
                                   TextColor="{AppThemeBinding Light=#666666, Dark=#AAAAAA}" />
                            <Label Text="â€¢ Update your graphics drivers"
                                   TextColor="{AppThemeBinding Light=#666666, Dark=#AAAAAA}" />
                        </VerticalStackLayout>
                    </Border>

                    <!-- Issue 3 -->
                    <Border BackgroundColor="{AppThemeBinding Light=#F8F8F8, Dark=#0f0f1a}"
                           Stroke="Transparent"
                           StrokeShape="RoundRectangle 8"
                           Padding="16">
                        <VerticalStackLayout Spacing="8">
                            <Label Text="ðŸ“¸ Export fails"
                                   FontAttributes="Bold"
                                   TextColor="{AppThemeBinding Light=#333333, Dark=#FFFFFF}" />
                            <Label Text="â€¢ Ensure you have write access to the destination"
                                   TextColor="{AppThemeBinding Light=#666666, Dark=#AAAAAA}" />
                            <Label Text="â€¢ Check available disk space (Run Diagnostics)"
                                   TextColor="{AppThemeBinding Light=#666666, Dark=#AAAAAA}" />
                            <Label Text="â€¢ Try a lower resolution export"
                                   TextColor="{AppThemeBinding Light=#666666, Dark=#AAAAAA}" />
                        </VerticalStackLayout>
                    </Border>

                    <!-- Issue 4 -->
                    <Border BackgroundColor="{AppThemeBinding Light=#F8F8F8, Dark=#0f0f1a}"
                           Stroke="Transparent"
                           StrokeShape="RoundRectangle 8"
                           Padding="16">
                        <VerticalStackLayout Spacing="8">
                            <Label Text="ðŸ”§ App crashes on startup"
                                   FontAttributes="Bold"
                                   TextColor="{AppThemeBinding Light=#333333, Dark=#FFFFFF}" />
                            <Label Text="â€¢ Delete settings: %LOCALAPPDATA%\ScalarScope\settings.json"
                                   TextColor="{AppThemeBinding Light=#666666, Dark=#AAAAAA}" />
                            <Label Text="â€¢ Reinstall the application"
                                   TextColor="{AppThemeBinding Light=#666666, Dark=#AAAAAA}" />
                            <Label Text="â€¢ Create a support bundle and report the issue"
                                   TextColor="{AppThemeBinding Light=#666666, Dark=#AAAAAA}" />
                        </VerticalStackLayout>
                    </Border>

                    <!-- Issue 5 -->
                    <Border BackgroundColor="{AppThemeBinding Light=#F8F8F8, Dark=#0f0f1a}"
                           Stroke="Transparent"
                           StrokeShape="RoundRectangle 8"
                           Padding="16">
                        <VerticalStackLayout Spacing="8">
                            <Label Text="âŒ¨ï¸ Keyboard shortcuts not working"
                                   FontAttributes="Bold"
                                   TextColor="{AppThemeBinding Light=#333333, Dark=#FFFFFF}" />
                            <Label Text="â€¢ Click inside the visualization area first"
                                   TextColor="{AppThemeBinding Light=#666666, Dark=#AAAAAA}" />
                            <Label Text="â€¢ Check if another window has focus"
                                   TextColor="{AppThemeBinding Light=#666666, Dark=#AAAAAA}" />
                            <Label Text="â€¢ See QUICK_REFERENCE.md for shortcut list"
                                   TextColor="{AppThemeBinding Light=#666666, Dark=#AAAAAA}" />
                        </VerticalStackLayout>
                    </Border>

                </VerticalStackLayout>
            </Border>

            <!-- Keyboard Shortcuts -->
            <Border BackgroundColor="{AppThemeBinding Light=#FFFFFF, Dark=#1a1a2e}"
                   Stroke="{AppThemeBinding Light=#DDDDDD, Dark=#2a2a4e}"
                   StrokeShape="RoundRectangle 12"
                   Padding="20">
                <VerticalStackLayout Spacing="16">
                    <Label Text="Keyboard Shortcuts"
                           FontSize="18"
                           FontAttributes="Bold"
                           TextColor="{AppThemeBinding Light=#333333, Dark=#FFFFFF}" />

                    <Grid ColumnDefinitions="Auto,*" RowDefinitions="Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto" ColumnSpacing="24" RowSpacing="8">
                        <Label Grid.Row="0" Grid.Column="0" Text="Space" FontAttributes="Bold" TextColor="{AppThemeBinding Light=#333333, Dark=#00d9ff}" />
                        <Label Grid.Row="0" Grid.Column="1" Text="Play / Pause" TextColor="{AppThemeBinding Light=#666666, Dark=#AAAAAA}" />

                        <Label Grid.Row="1" Grid.Column="0" Text="â† / â†’" FontAttributes="Bold" TextColor="{AppThemeBinding Light=#333333, Dark=#00d9ff}" />
                        <Label Grid.Row="1" Grid.Column="1" Text="Step backward / forward" TextColor="{AppThemeBinding Light=#666666, Dark=#AAAAAA}" />

                        <Label Grid.Row="2" Grid.Column="0" Text="Home / End" FontAttributes="Bold" TextColor="{AppThemeBinding Light=#333333, Dark=#00d9ff}" />
                        <Label Grid.Row="2" Grid.Column="1" Text="Jump to start / end" TextColor="{AppThemeBinding Light=#666666, Dark=#AAAAAA}" />

                        <Label Grid.Row="3" Grid.Column="0" Text="+ / -" FontAttributes="Bold" TextColor="{AppThemeBinding Light=#333333, Dark=#00d9ff}" />
                        <Label Grid.Row="3" Grid.Column="1" Text="Increase / decrease speed" TextColor="{AppThemeBinding Light=#666666, Dark=#AAAAAA}" />

                        <Label Grid.Row="4" Grid.Column="0" Text="S" FontAttributes="Bold" TextColor="{AppThemeBinding Light=#333333, Dark=#00d9ff}" />
                        <Label Grid.Row="4" Grid.Column="1" Text="Take screenshot" TextColor="{AppThemeBinding Light=#666666, Dark=#AAAAAA}" />

                        <Label Grid.Row="5" Grid.Column="0" Text="Ctrl+O" FontAttributes="Bold" TextColor="{AppThemeBinding Light=#333333, Dark=#00d9ff}" />
                        <Label Grid.Row="5" Grid.Column="1" Text="Open file" TextColor="{AppThemeBinding Light=#666666, Dark=#AAAAAA}" />
                    </Grid>
                </VerticalStackLayout>
            </Border>

            <!-- About -->
            <Border BackgroundColor="{AppThemeBinding Light=#FFFFFF, Dark=#1a1a2e}"
                   Stroke="{AppThemeBinding Light=#DDDDDD, Dark=#2a2a4e}"
                   StrokeShape="RoundRectangle 12"
                   Padding="20">
                <VerticalStackLayout Spacing="12">
                    <Label Text="About ScalarScope"
                           FontSize="18"
                           FontAttributes="Bold"
                           TextColor="{AppThemeBinding Light=#333333, Dark=#FFFFFF}" />

                    <Label Text="Version 1.0.0-rc.1"
                           TextColor="{AppThemeBinding Light=#666666, Dark=#AAAAAA}" />

                    <Label Text="Visualization tool for machine learning training dynamics."
                           TextColor="{AppThemeBinding Light=#666666, Dark=#AAAAAA}" />

                    <Label Text="Â© 2025 ScalarScope (mcp-tool-shop-org)"
                           TextColor="{AppThemeBinding Light=#888888, Dark=#666666}" />

                    <HorizontalStackLayout Spacing="16" Margin="0,8,0,0">
                        <Button Text="GitHub"
                                Clicked="OnGitHubClicked"
                                BackgroundColor="Transparent"
                                TextColor="#00d9ff"
                                Padding="0" />
                        <Button Text="Report Issue"
                                Clicked="OnReportIssueClicked"
                                BackgroundColor="Transparent"
                                TextColor="#00d9ff"
                                Padding="0" />
                    </HorizontalStackLayout>
                </VerticalStackLayout>
            </Border>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
