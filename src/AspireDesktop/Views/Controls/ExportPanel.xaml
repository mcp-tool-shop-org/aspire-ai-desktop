<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:AspireDesktop.ViewModels"
             x:Class="AspireDesktop.Views.Controls.ExportPanel"
             x:DataType="vm:ExportViewModel">

    <Frame BackgroundColor="#1a1a2e"
           BorderColor="#2a2a4e"
           CornerRadius="10"
           Padding="20">
        <VerticalStackLayout Spacing="15">
            <Label Text="EXPORT"
                   FontSize="16"
                   FontAttributes="Bold"
                   TextColor="#00d9ff"/>

            <!-- Quick Actions -->
            <Grid ColumnDefinitions="*,*" ColumnSpacing="10">
                <Button Grid.Column="0"
                        Text="Screenshot"
                        Command="{Binding ExportCurrentFrameCommand}"
                        BackgroundColor="#4ecdc4"
                        TextColor="White"
                        FontSize="12"/>
                <Button Grid.Column="1"
                        Text="Frame Sequence"
                        Command="{Binding ExportFrameSequenceCommand}"
                        BackgroundColor="#a29bfe"
                        TextColor="White"
                        FontSize="12"/>
            </Grid>

            <!-- Settings -->
            <BoxView HeightRequest="1" Color="#2a2a4e" Margin="0,5"/>

            <Grid ColumnDefinitions="Auto,*" RowDefinitions="Auto,Auto,Auto,Auto" ColumnSpacing="10" RowSpacing="8">
                <Label Grid.Row="0" Grid.Column="0" Text="Resolution:" TextColor="#888" VerticalOptions="Center"/>
                <HorizontalStackLayout Grid.Row="0" Grid.Column="1" Spacing="5">
                    <Entry Text="{Binding Width}" Keyboard="Numeric" WidthRequest="60" TextColor="White" BackgroundColor="#16213e"/>
                    <Label Text="x" TextColor="#888" VerticalOptions="Center"/>
                    <Entry Text="{Binding Height}" Keyboard="Numeric" WidthRequest="60" TextColor="White" BackgroundColor="#16213e"/>
                </HorizontalStackLayout>

                <Label Grid.Row="1" Grid.Column="0" Text="FPS:" TextColor="#888" VerticalOptions="Center"/>
                <Entry Grid.Row="1" Grid.Column="1" Text="{Binding Fps}" Keyboard="Numeric" WidthRequest="60" TextColor="White" BackgroundColor="#16213e"/>

                <Label Grid.Row="2" Grid.Column="0" Text="Duration (s):" TextColor="#888" VerticalOptions="Center"/>
                <Entry Grid.Row="2" Grid.Column="1" Text="{Binding Duration}" Keyboard="Numeric" WidthRequest="60" TextColor="White" BackgroundColor="#16213e"/>
            </Grid>

            <!-- Toggles -->
            <BoxView HeightRequest="1" Color="#2a2a4e" Margin="0,5"/>

            <Grid ColumnDefinitions="*,Auto">
                <Label Text="Show Professors" TextColor="White" VerticalOptions="Center"/>
                <Switch Grid.Column="1" IsToggled="{Binding ShowProfessors}" OnColor="#a29bfe"/>
            </Grid>

            <Grid ColumnDefinitions="*,Auto">
                <Label Text="Show Metrics" TextColor="White" VerticalOptions="Center"/>
                <Switch Grid.Column="1" IsToggled="{Binding ShowMetrics}" OnColor="#4ecdc4"/>
            </Grid>

            <Grid ColumnDefinitions="*,Auto">
                <Label Text="Show Eigenvalues" TextColor="White" VerticalOptions="Center"/>
                <Switch Grid.Column="1" IsToggled="{Binding ShowEigenvalues}" OnColor="#ff9f43"/>
            </Grid>

            <!-- Status -->
            <BoxView HeightRequest="1" Color="#2a2a4e" Margin="0,5"/>

            <Label Text="{Binding ExportStatus}"
                   TextColor="#888"
                   FontSize="11"
                   LineBreakMode="TailTruncation"/>

            <ActivityIndicator IsRunning="{Binding IsExporting}"
                               Color="#00d9ff"
                               HeightRequest="20"
                               IsVisible="{Binding IsExporting}"/>
        </VerticalStackLayout>
    </Frame>
</ContentView>
